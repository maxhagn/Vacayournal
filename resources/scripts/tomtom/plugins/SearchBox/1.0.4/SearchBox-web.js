!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){(function(e){var n="Expected a function",i=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,d=l||h||Function("return this")(),f=Object.prototype.toString,p=Math.max,_=Math.min,v=function(){return d.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&f.call(t)==r}(t))return i;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):s.test(t)?i:+t}t.exports=function(t,e,i){var r,o,s,a,u,c,l=0,h=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError(n);function b(e){var n=r,i=o;return r=o=void 0,l=e,a=t.apply(i,n)}function g(t){var n=t-c;return void 0===c||n>=e||n<0||d&&t-l>=s}function E(){var t=v();if(g(t))return x(t);u=setTimeout(E,function(t){var n=e-(t-c);return d?_(n,s-(t-l)):n}(t))}function x(t){return u=void 0,f&&r?b(t):(r=o=void 0,a)}function C(){var t=v(),n=g(t);if(r=arguments,o=this,c=t,n){if(void 0===u)return function(t){return l=t,u=setTimeout(E,e),h?b(t):a}(c);if(d)return u=setTimeout(E,e),b(c)}return void 0===u&&(u=setTimeout(E,e)),a}return e=m(e)||0,y(i)&&(h=!!i.leading,s=(d="maxWait"in i)?p(m(i.maxWait)||0,e):s,f="trailing"in i?!!i.trailing:f),C.cancel=function(){void 0!==u&&clearTimeout(u),l=0,r=c=o=u=void 0},C.flush=function(){return void 0===u?a:x(v())},C}}).call(this,n(3))},,,function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=n.p+"SearchBox/SearchBox.css"},function(t,e,n){"use strict";function i(t,e){if(void 0!==t)return"imperial"===e?function(t){var e=function(t){return 1.0936133*t}(t),n=function(t){return.000621371192*t}(t);return n<1?Math.round(e)+" yd":Math.round(10*n)/10+" mi"}(t):function(t){var e=Math.round(t);return e>=1e3?Math.round(e/100)/10+" km":e+" m"}(t)}n.r(e);var r={RESULTS_CLEARED:"tomtom.searchbox.resultscleared",RESULTS_FOUND:"tomtom.searchbox.resultsfound",RESULT_SELECTED:"tomtom.searchbox.resultselected"},o=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.origin=e,this.data=n},s=function(t,e){return new o(t,e)};function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var l=function(){function t(e,n,i){a(this,t),this._evented=e,this._options=i,this._result=n,this._createResultElement()}return c(t,[{key:"select",value:function(t){this._evented.fire(r.RESULT_SELECTED,s(t,{result:this._result,text:this._getResultText()}))}},{key:"getContainer",value:function(){return this._container}},{key:"_createResultElement",value:function(){this._container=document.createElement("div"),this._container.onclick=this.select.bind(this),this._container.className="tt-search-box-result-list",this._addPoiName(),this._addAddress(),this._addDistance()}},{key:"_addPoiName",value:function(){if(void 0!==this._result.poi&&void 0!==this._result.poi.name){var t=document.createElement("div");t.className="tt-search-box-result-list-bold";var e=document.createTextNode(this._result.poi.name);t.appendChild(e),this._container.appendChild(t)}}},{key:"_addAddress",value:function(){if(void 0!==this._result.address){var t=document.createElement("div");t.className="tt-search-box-result-list-bold";var e=[];void 0!==this._result.address.freeformAddress&&e.push(this._result.address.freeformAddress),void 0!==this._result.address.countryCodeISO3&&e.push(this._result.address.countryCodeISO3);var n=document.createTextNode(e.join(", "));t.appendChild(n),this._container.appendChild(t)}}},{key:"_addDistance",value:function(){if(void 0!==this._result.dist){var t=document.createElement("div"),e=document.createTextNode(this._formatDistance(this._result.dist));t.appendChild(e),this._container.appendChild(t)}}},{key:"_formatDistance",value:function(t){return i(t,this._options.units)}},{key:"_getResultText",value:function(){return this._result.poi?this._result.poi.name+", "+this._result.address.freeformAddress:this._result.address.freeformAddress}}]),t}(),h=function(){function t(e){a(this,t),this._container=document.createElement("div"),this._container.className="tt-search-box-result-list",this._container.innerText=e}return c(t,[{key:"select",value:function(){}},{key:"getContainer",value:function(){return this._container}}]),t}(),d={resultListElement:function(t,e,n){return new l(t,e,n)},noResultsListElement:function(t){return new h(t)}},f=40,p=38,_=13;function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._evented=e,this.options=i,this._container=document.createElement("div"),this._container.className="tt-search-box-result-list-container",this._highlightedIdx=-1,this._resultsCount=-1,this._resultListElements=[],this._searchBoxContainer=n,this._searchBoxContainer.append(this._container),this._searchBoxContainer.onkeydown=this._onKeyDown.bind(this),this._evented.on(r.RESULT_SELECTED,this.clearResults.bind(this))}var e,n,i;return e=t,(n=[{key:"_onKeyDown",value:function(t){var e=t.keyCode||t.which;e===f||e===p?this._highlightElement(e):e===_&&this._selectElement(t)}},{key:"_convertSearchResponseToListElements",value:function(t){var e=this;return t&&t.results&&t.results.length?t.results.map(function(t){return d.resultListElement(e._evented,t,e.options)}):[d.noResultsListElement(this.options.noResultsMessage)]}},{key:"appendResults",value:function(t){var e=this;this.clearResults();var n=this._convertSearchResponseToListElements(t);this._resultsCount=n.length,n.forEach(function(t){e._resultListElements.push(t),e._container.appendChild(t.getContainer())},this),this._container.style.height="auto"}},{key:"clearResults",value:function(){for(;this._container.firstChild;)this._container.removeChild(this._container.firstChild),this._container.style.height="0px";this._resultsCount=-1,this._resultListElements=[],this._highlightedIdx=-1}},{key:"_highlightElement",value:function(t){this._updateHighlightedElementStyle("remove"),this._updateHighlightedIndex(t),this._updateHighlightedElementStyle("add")}},{key:"_selectElement",value:function(t){this._highlightedIdx>-1?this._resultListElements[this._highlightedIdx].select(t):t.preventDefault()}},{key:"updateOptions",value:function(t){this.options=Object.assign({},this.options,t)}},{key:"_updateHighlightedIndex",value:function(t){this._highlightedIdx=t===p?this._highlightedIdx-1<0?this._resultsCount-1:this._highlightedIdx-1:this._highlightedIdx+1>=this._resultsCount?0:this._highlightedIdx+1}},{key:"_updateHighlightedElementStyle",value:function(t){var e=this._container.childNodes[this._highlightedIdx];e&&(e.classList[t]("highlight"),"add"===t&&e.scrollIntoView(!1))}}])&&v(e.prototype,n),i&&v(e,i),t}(),m=n(0),b=n.n(m);n(4);function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(t,e,n){var i=t[e];i||(i=[],t[e]=i),i.push(n)}function C(t,e,n){var i=t[e];return i&&i.forEach(function(t){t.apply(void 0,E(n))}),i}var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.eventToHandlersMap={},this.onceEventToHandlersMap={}}var e,n,i;return e=t,(n=[{key:"fire",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];C(this.eventToHandlersMap,t,n),C(this.onceEventToHandlersMap,t,n)&&delete this.onceEventToHandlersMap[t]}},{key:"on",value:function(t,e){x(this.eventToHandlersMap,t,e)}},{key:"off",value:function(t){t?(delete this.eventToHandlersMap[t],delete this.onceEventToHandlersMap[t]):(this.eventToHandlersMap={},this.onceEventToHandlersMap={})}},{key:"once",value:function(t,e){x(this.onceEventToHandlersMap,t,e)}}])&&g(e.prototype,n),i&&g(e,i),t}();function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var j=function(t){function e(t,n){var i,o,s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,(i=!(s=k(e).call(this))||"object"!==w(s)&&"function"!=typeof s?I(o):s).fuzzySearch=t,i.options=Object.assign({},{idleTimePress:200,minNumberOfCharacters:3,searchOptions:{},units:"metric",filter:function(){return!0},noResultsMessage:"No results found."},n),i._createSearchBoxContainer(),i.on(r.RESULT_SELECTED,i._onResultSelected.bind(I(I(i)))),i}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,S),n=e,(i=[{key:"getOptions",value:function(){return this.options}},{key:"getSearchBoxHTML",value:function(){return this._container}},{key:"onAdd",value:function(t){return this._map=t,this._container}},{key:"onRemove",value:function(){this._container.parentNode.removeChild(this._container),this._map=void 0,this.fuzzySearch=void 0}},{key:"query",value:function(){var t=this;return this._runSearch().then(function(e){t.options.filter&&e&&e.results&&(e.results=e.results.filter(t.options.filter)),t._resultList.appendResults(e),t.fire(r.RESULTS_FOUND,s(null,e))})}},{key:"updateOptions",value:function(t){this.options=Object.assign({},this.options,t),this._resultList.updateOptions(this.options)}},{key:"_createSearchBoxContainer",value:function(){return this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl tt-ctrl tt-search-box",this._inputContainer=document.createElement("div"),this._inputContainer.className="tt-search-box-input-container",this._container.appendChild(this._inputContainer),this._addSearchIcon(),this._addInput(),this._addCloseIcon(),this._addResultList(),this._container}},{key:"_addCloseIcon",value:function(){var t=this;this._closeIcon=document.createElement("div"),this._closeIcon.className="tt-search-box-close-icon hidden",this._closeIcon.onclick=function(){t._input.value="",t._resultList.clearResults(),t._closeIcon.className="tt-search-box-close-icon hidden",t.fire(r.RESULTS_CLEARED)},this._inputContainer.appendChild(this._closeIcon)}},{key:"_updateInputContainerStyle",value:function(t){t?this._inputContainer.classList.add("tt-search-box-input-container__focused"):this._inputContainer.classList.remove("tt-search-box-input-container__focused")}},{key:"_addInput",value:function(){this._input=document.createElement("input"),this._input.className="tt-search-box-input",this._input.oninput=b()(this._onInputChange.bind(this),this.options.idleTimePress),this._input.onfocus=this._updateInputContainerStyle.bind(this,!0),this._input.onblur=this._updateInputContainerStyle.bind(this,!1),this._inputContainer.appendChild(this._input)}},{key:"_addResultList",value:function(){this._resultList=new y(this,this._container,this.options)}},{key:"_addSearchIcon",value:function(){this._searchIcon=document.createElement("div"),this._searchIcon.className="tt-search-box-search-icon",this._inputContainer.appendChild(this._searchIcon)}},{key:"_onResultSelected",value:function(t){this._input.value=t.data.text}},{key:"_onInputChange",value:function(){this._input.value.length>0||this._resultList._resultsCount>0?this._closeIcon.className="tt-search-box-close-icon":this._closeIcon.className="tt-search-box-close-icon hidden",this.options.minNumberOfCharacters>this._input.value.length||this.query()}},{key:"_runSearch",value:function(){var t=this._input.value;if(!t)return Promise.resolve(void 0);var e={query:t,typeahead:!0};this._map&&(e.center=this._map.getCenter());var n=Object.assign({},e,this.options.searchOptions);return this.fuzzySearch(n).go()}}])&&T(n.prototype,i),o&&T(n,o),e}();window.tt=window.tt||{},window.tt.plugins=window.tt.plugins||{},window.tt.plugins.SearchBox=j}]);